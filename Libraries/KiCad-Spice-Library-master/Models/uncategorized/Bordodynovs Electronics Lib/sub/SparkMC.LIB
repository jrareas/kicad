.SUBCKT sparkMC 1 2  
X2 1 2 SPARKGAP
+PARAMS: VTHRES=90 VARC=10 ISUS=500M RNEG=-1 LPL=130N RPL=2K CPAR=1P CARC=3P 

.SUBCKT SPARKGAP  Pin1 Pin2
+PARAMS: VTHRES=90 VARC=10 ISUS=500M RNEG=-1 LPL=130N RPL=2K CPAR=1P CARC=3P 
V1 Pin1 2 DC 0 
L1 2 3 {Lpl}
R1 3 2 {Rpl}
C1 Pin1 Pin2 {Cpar}
R2 Pin2 Pin1 10Meg
R3 5 3 {Rneg}
D1 6 5 DCLAMP
D2 6 Switch DCLAMP
C2 Pin1 Switch {Carc}
R4 Switch Pin2 1e10
E2 8 0 VALUE = {IF(ABS(V(PIN1,PIN2))>V(THRESH),10,IF(ABS(I(V1))>ISUS,10,10N))}
E3 Thresh 0 VALUE = {VTHRES+(VTHRES*V(ION))}
R5 8 Switchchk 10
C3 Switchchk 0 10p
E4 Ion 0 TABLE {V(12,0)} = ( 0,0  )( 1U,.5565M  )( 10M,1M  )( 100M,86M  )(
+ 1,217M  )( 10,521M  )( 100,956M )
RE4 12 0 1G;added by E4
E5 13 0 VALUE = {V(PIN1,PIN2)}
R6 14 Dif 1Meg
C4 13 Dif 1u
E6 14 0 VALUE = {-100Meg*V(DIF)}
E8 Dvdt 0 VALUE = {100*V(DIF)}
E9 12 0 VALUE = {ABS(V(DVDT))}
G1 Switch Pin2 VALUE = {V(SWITCH,PIN2)*V(SWITCHCHK)}
.MODEL DCLAMP D (BV={VARC})
.ENDS SPARKGAP
*
.ENDS sparkMC
