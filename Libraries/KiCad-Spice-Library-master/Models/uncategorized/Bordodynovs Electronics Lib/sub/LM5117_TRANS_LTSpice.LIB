*$
* LM25117
*****************************************************************************
* (C) Copyright 2015 Texas Instruments Incorporated. All rights reserved.
*****************************************************************************
** This model is designed as an aid for customers of Texas Instruments.
** TI and its licensors and suppliers make no warranties, either expressed
** or implied, with respect to this model, including the warranties of
** merchantability or fitness for a particular purpose.  The model is
** provided solely on an "as is" basis.  The entire risk as to its quality
** and performance is with the customer
*****************************************************************************
*
* This model is subject to change without notice. Texas Instruments
* Incorporated is not responsible for updating this model.
*
*****************************************************************************
*
** Released by: WEBENCH Design Center, Texas Instruments Inc.
* Part: LM25117
* Date: 07JAN2015
* Model Type: TRANSIENT
* Simulator: PSPICE
* Simulator Version: 16.2.0.p001
* EVM Order Number: AN-2103 LM5117
* EVM Users Guide: SNVA466B–May 2011–Revised April 2013
* Datasheet: SNVS714E –APRIL 2011–REVISED MARCH 2013
*
* Model Version: Final 1.10
* modified 08/17/2017 for LTspice by eetech00@yahoo.com
* This model is made from a TI LM25117 model.
****************************************************************************
*
* Updates:
*
* Final 1.10
* Implemented the CM, VCCDIS and Hiccup current limit.
*
* Final 1.00
* Release to Customer.
*
****************************************************************************
.SUBCKT LM5117_TRANS AGND CM COMP CS CSG DEMB FB HB HO LO PGND RAMP RES RT SS SW UVLO VCC VCCDIS VIN  EP PARAMS: MODE=0
R_R3         AGND PGND  1k TC=0,0
B_ABM2         N14683776 0 V=-((V(CS,CSG)*20.87)+0.0184)
E_ETRACK         TRACK_1 AGND N14683776 0 1
B_UHK_ABM5         GEN 0 V=IF(V(UHK_STANDBY)<0.5, IF(V(GUVLO)>2.5,1,0), 0)
V_UHK_V3         UHK_N14669408 UHK_N14668948 3Vdc
B_UHK_ABMII2         VCC UVLO I=if(V(UVLO)>1.25,20e-6,0)
B_UHK_ABM2         UHK_N14669364 0 V=if(V(SS,PGND)<V(UHK_VREF,PGND), V(SS,PGND),V(UHK_VREF,PGND))
B_UHK_ABMII1         0 SS I=IF(V(GEN) > 0.5 , 10u , 0)
X_UHK_U1         UHK_46_1 HICCUP_SS UHK_46 OR2_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_UHK_S1    UHK_46 0 PGND SS Housekeeping_UHK_S1
C_UHK_C1         UHK_N14669276 0  1n  TC=0,0
E_UHK_E2         UHK_N14668948 0 PGND 0 1
B_UHK_ABM3         UHK_STANDBY 0 V=IF(V(UVLO)<1.25,1,IF(V(VCC)<5.5,1,0))
R_UHK_R1         UHK_N14669364 UHK_N14669276  1 TC=0,0
E_UHK_E1         SS08 PGND UHK_N14669276 0 1
E_UHK_E3         SDWN 0 UHK_46 0 1
V_UHK_V2         UHK_VREF PGND 0.8Vdc
X_UHK_UA10         GEN UHK_46_1 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
D_UHK_D3         SS UHK_N14669408 D_D1
C_C22         N00103 PGND  0.2m  TC=0,0
C_UDriver_C7         LO PGND  1p  TC=0,0
R_UDriver_R23         UDriver_H PGND  100k TC=0,0
E_UDriver_EB6         LO1 PGND UDriver_N14649113 0 1
R_UDriver_R24         UDriver_HO1 HO  2 TC=0,0
X_UDriver_U6         CLK UDriver_RZZZ UDriver_Q UDriver_QB SRLATCHRHP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_UDriver_UA22         UDriver_N14638997 UDriver_N14638879 UDriver_L OR2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
X_UDriver_U5         CLK UDriver_N14636122 INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_UDriver_U1         VRAMP UDriver_N14635290 ILIM_1 COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
R_UDriver_R28         LO1 LO  2 TC=0,0
X_UDriver_UA19         UDriver_LEM LEN UDriver_N14638997 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_UDriver_UA21         UDriver_HEN LEN INV_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_UDriver_UA20         LEN UDriver_LOR UDriver_N14638879 AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_UDriver_UA18         UDriver_HOR UDriver_HEN UDriver_H AND2_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=500E-3
X_UDriver_UX7         UDriver_LOF UDriver_HOR BUF_DELAY_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5 DELAY=62n
X_UDriver_U4         UDriver_N14636122 UDriver_Q UDriver_HEN AND2_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
R_UDriver_R12         UDriver_L PGND  100k TC=0,0
X_UDriver_UX8         LEN UDriver_LEM BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=150n
B_UDriver_ABM5         UDriver_N14649113 0 V=if((V(GEN)>0.5) & (V(UDriver_L) > 0.5) & (V(ZCLOQ) < 0.5), V(VCC),0)
C_UDriver_C6         HO SW  1p  TC=0,0
B_UDriver_ABM1         UDriver_HOF 0 V=if(V(SW) < 0.5*V(VCC), 1, 0)
V_UDriver_VIlim         UDriver_N14635290 0 1.2
B_UDriver_ABM2         UDriver_LOF 0 V=if(V(LO) < 0.25*V(VCC), 1, 0)
X_UDriver_UA16         PWM ILIM_1 UDriver_RZZZ OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
B_UDriver_ABM3         UDriver_N14645810 0 V=if ((V(GEN) > 0.5) & (V(UDriver_H) > 0.5) , V(HB,SW) , 0)
X_UDriver_S1    HB SW UDriver_N14643966 GUVLO Driver_UDriver_S1
R_UDriver_R15         GUVLO PGND  1Meg TC=0,0
E_UDriver_EB2         UDriver_HO1 SW UDriver_N14645810 0 1
V_UDriver_V1         UDriver_N14643966 PGND 5Vdc
X_UDriver_UX10         UDriver_HOF UDriver_LOR BUF_DELAY_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5 DELAY=55n
V_UGmiphase_V2         UGmiphase_N14647872 0 1 dc
X_UGmiphase_U2         SW UGmiphase_52 UGmiphase_ZC COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
R_UGmiphase_R26         LO1 UGmiphase_LRC  10k TC=0,0
X_UGmiphase_STrack    CLK 0 UGmiphase_TRACK VRAMP Gmiphase_UGmiphase_STrack
R_UGmiphase_R27         UGmiphase_N14651024 UGmiphase_N14650520  10 TC=0,0
X_UGmiphase_S2    UGmiphase_HOENB 0 RAMP PGND Gmiphase_UGmiphase_S2
V_UGmiphase_V1         PGND UGmiphase_52 0.005
E_UGmiphase_EB13         UGmiphase_N14633290 0 RAMP PGND 1
R_UGmiphase_R1         UGmiphase_N14668783 PGND  100k TC=0,0
X_UGmiphase_U5         UGmiphase_LRC UGmiphase_LOD BUF_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=0.5
B_UGmiphase_ABM1         UGmiphase_N14650520 0 V=if(V(SS) < 0.8, 15 ,2.75)
X_UGmiphase_U6         ZCLOQ UGmiphase_ZQL LEN 0 UGmiphase_N14647872
+  UGmiphase_ZCLO DFFSBRB_RHPBASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_UGmiphase_C2         UGmiphase_LRC PGND  10p  TC=0,0
X_UGmiphase_UA17         UGmiphase_N14637472 UGmiphase_HOENB INV_BASIC_GEN
+  PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
C_UGmiphase_C21         UGmiphase_N14651024 PGND  100p  TC=0,0
R_UGmiphase_Rdemb         DEMB PGND  50k TC=0,0
G_UGmiphase_GTrack         0 UGmiphase_TRACK CSG CS {10*1e-3}
R_UGmiphase_R7         ZCLOQ 0  100k TC=0,0
E_UGmiphase_EB8         UGmiphase_N14637472 0 HO SW 1
R_UGmiphase_R14         UGmiphase_TRACK 0  1k TC=0,0
D_UGmiphase_D1         COMP UGmiphase_N146717810 _D2_MOD
X_UGmiphase_U1         VRAMP UGmiphase_N14668783 PWM COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
D_UGmiphase_D4         UGmiphase_LRC LO1 _D4_mod
X_UGmiphase_U4         UGmiphase_N14651024 DEMB UGmiphase_N14640989
+  COMP_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
C_UGmiphase_C4         UGmiphase_N14633290 VRAMP  100p  TC=0,0
X_UGmiphase_U3         UGmiphase_ZC UGmiphase_N14640989 UGmiphase_LOD
+  UGmiphase_ZCLO NAND3_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=500E-3
D_UGmiphase_D2         UGmiphase_N146717810 UGmiphase_N14668783 _D2_MOD
X_U1         ILIM_1 GEN HICCUP ILIM RES HO LO VIN PGND VRAMP SS HICCUP_SS CLK
+  CLK_INT for_cl_hierarchy PARAMS:
R_R28         N00045 N00103  1 TC=0,0
E_E1         CM 0 CM N00103 20k
D_UEA_D3         UEA_N14631083 0 _D3_mod
C_UEA_C17         UEA_N14631083 PGND  0.53n IC=2 TC=0,0
R_UEA_R17         UEA_N14631083 PGND  1Meg TC=0,0
C_UEA_C18         COMP 0  1n  TC=0,0
R_UEA_R18         UEA_N14631185 COMP  1 TC=0,0
E_UEA_E1         UEA_N14631185 PGND UEA_N14631083 PGND 1
D_UEA_D5         0 UEA_N14631083 _D5_mod
G_UEA_G2         0 UEA_N14631083 SS08 FB 10m
D_U_VCC_D4         VCC U_VCC_VCC_CLAMP D_D1
R_U_VCC_R1         VCC PGND  1000k TC=0,0
C_U_VCC_C2         U_VCC_N14669548 0  1n  TC=0,0
E_U_VCC_E1         U_VCC_N14672130 PGND VIN PGND 1
*C_U_VCC_C3         VCC U_VCC_VCC_CLAMP  10p  TC=0,0
R_U_VCC_R_VCCIDS         VCCDIS PGND  1000k TC=0,0
B_U_VCC_ABM2I1         0 VCC I=LIMIT((V(U_VCC_N14669548) - V(VCC)-0.1)*10m, -30m,30m)
C_U_VCC_C1         VCC 0  2u  IC = {7.8*MODE}
R_U_VCC_R2         U_VCC_N14671707 U_VCC_N14669548  1 TC=0,0
V_U_VCC_V1         U_VCC_N14672130 U_VCC_VCC_CLAMP 0.6Vdc
B_U_VCC_ABM1         U_VCC_N14671707 0 V=if(V(VCCDIS)<1.25,7.674,0)
D_UClk_D1         CLK_INT UClk_N16781209 _D_IDEAL
B_UClk_ABMII1         0 UClk_CLK_RAMP I=5.25321m/(V(RT) + 948u)
X_UClk_U4         SDWN UClk_CLK_RST UClk_N16777572 OR2_BASIC_GEN PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
X_UClk_S1    UClk_N16777572 0 UClk_CLK_RAMP 0 Clock_Gen_UClk_S1
C_UClk_C2         UClk_N16781209 0  {1.443*500p}  TC=0,0
I_UClk_I1         0 RT DC 1uAdc
R_UClk_R3         0 RT  1G TC=0,0
X_UClk_U3         UClk_N16781209 CLK BUF_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_UClk_C1         0 UClk_CLK_RAMP  1u IC=0 TC=0,0
V_UClk_V1         UClk_N16777361 0 1
R_UClk_R4         CLK_INT UClk_N16781209  1k TC=0,0
X_UClk_U2         CLK_INT UClk_CLK_RST BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=20n
X_UClk_U1         UClk_CLK_RAMP UClk_N16777361 CLK_INT COMP_BASIC_GEN PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_S1    LO PGND N00045 TRACK_1 LM25117_TOPLEVEL_S1
.IC         V(SS)={3*MODE}
*.IC         V(HB,SW)={7.8*MODE}
.IC         V(UEA_N14631083)={1.5*MODE}
.IC         V(VCC)={7.8*MODE}
.ENDS LM5117_TRANS
*$
.subckt Housekeeping_UHK_S1 1 2 3 4
S_UHK_S1         3 4 1 2 _UHK_S1
RS_UHK_S1         1 2 1G
.MODEL         _UHK_S1 VSWITCH Roff=1e6 Ron=13 Voff=0.0V Von=1.0V
.ends Housekeeping_UHK_S1
*$
.subckt Driver_UDriver_S1 1 2 3 4
S_UDriver_S1         3 4 1 2 _UDriver_S1
RS_UDriver_S1         1 2 1G
.MODEL         _UDriver_S1 VSWITCH Roff=100Meg Ron=1m Voff=0.0V Von=1.0V
.ends Driver_UDriver_S1
*$
.subckt Gmiphase_UGmiphase_STrack 1 2 3 4
S_UGmiphase_STrack         3 4 1 2 _UGmiphase_STrack
RS_UGmiphase_STrack         1 2 1G
.MODEL         _UGmiphase_STrack VSWITCH Roff=1Meg Ron=100m Voff=0.2 Von=0.8
.ends Gmiphase_UGmiphase_STrack
*$
.subckt Gmiphase_UGmiphase_S2 1 2 3 4
S_UGmiphase_S2         3 4 1 2 _UGmiphase_S2
RS_UGmiphase_S2         1 2 1G
.MODEL         _UGmiphase_S2 VSWITCH Roff=1G Ron=10m Voff=0.2 Von=0.8
.ends Gmiphase_UGmiphase_S2
*$
.subckt Clock_Gen_UClk_S1 1 2 3 4
S_UClk_S1         3 4 1 2 _UClk_S1
RS_UClk_S1         1 2 1G
.MODEL         _UClk_S1 VSWITCH Roff=1e6 Ron=1u Voff=0.2 Von=0.8
.ends Clock_Gen_UClk_S1
*$
.subckt LM25117_TOPLEVEL_S1 1 2 3 4
S_S1         3 4 1 2 _S1
RS_S1         1 2 1G
.MODEL         _S1 VSWITCH Roff=100e6 Ron=1.0u Voff=0.2 Von=0.5
.ends LM25117_TOPLEVEL_S1
*$



.SUBCKT FOR_CL_HIERARCHY Ilim_1 GEN HICCUP ILIM RES
+ HO LO VIN GND
+ VRAMP SS HICCUP_SS CLK CLK_INT
R_R19         N163119542 N16311770  1
C_C18         GND N16311718  1n
C_C13         GND N16311374  1n
R_R16         H_END_1 H_END  1
R_R20         N16311794 N16311360  1
B_ABM6         ILIM 0 V=if(V(HICCUP)<0.5,V(N16311374) ,V(HICCUP))
C_C20         GND COUNTER  1u IC=0
C_C17         GND H_END_1  20n
R_R18         N16311658 HICCUP  1
X_U612         GEN N16311360 N16311364 AND2_BASIC_GEN
+ PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
B_ABMII2         N16311806 COUNTER I=if(V(N16311364) > 0.5,1m,0)
*+ 0.5,1m*5.797,0) }
C_C15         GND N16311430  1n
*X_U632         RES N163119361 N16311566 COMP_BASIC_GEN
X_U632         RES N163119361 H_END COMP_BASIC_GEN
+ PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
C_C19         GND N16311658  1n
R_R12         ILIM_1 N16311374  1
E_E1         HICCUP_SS GND HICCUP GND 1
X_U613         N16311658 N16311636 INV_DELAY_BASIC_GEN
+ PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5 DELAY=10u
X_U616         N16311320 N16311718 N163119542 AND2_BASIC_GEN
+ PARAMS: VDD=1
+  VSS=0 VTHRESH=500E-3
R_R14         HO N16311430  1
B_ABM8         N16313522 0 V=if(V(LO) >3.5,1,0)
X_ILIM_INV   ILIM_2 ILIM_2B INV_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 200n
X_ONESHOT_ILIM_COUNTER   ILIM_2 ILIM_2B N16311794 AND2_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X_D_ILIM ILIM_1 ILIM_2 D_D1_CL
C_ILIM ILIM_2 0 1N
R_ILIM ILIM_1 ILIM_2 1G
S_ILIM ILIM_2 0 CLK_INT 0 _SRESET
.MODEL  _SRESET VSWITCH Roff=1e6 Ron=1m Voff=0.25 Von=0.75
X_U33         N16311690 H_END HICCUP HICCUP_N srlatchrhp_basic_gen
+ PARAMS:
+  VDD=1 VSS=0 VTHRESH=0.5
X_S5    N16311482 GND COUNTER GND FOR_CL_S5
C_C22         GND N16311360  1n
V_V7         N163119361 GND 1.25
X_U615       COUNTER N16311762 N16311690 COMP_BASIC_GEN
+ PARAMS: VDD=1 VSS=0
+  VTHRESH=0.5
R_R21         N16311314 N16311320  120
R_R17         N16311442 N16311718  1
C_C21         GND N16311770  1n
C_C23         GND N16311320  1n
V_V9         N16311806 GND 12
R_R15         ILIM N16311426  1
C_C16         GND N16311426  1n
X_U32       N16311430 N16311426 N16311442 QB_2 srlatchrhp_basic_gen PARAMS: VDD=1 VSS=0 VTHRESH=0.5
B_ABM7         RESET 0 V=IF(V(HO)<V(VIN),V(N16311770),0)
B_G5         GND RES I=IF(V(HICCUP)>0.5, 10us, 0)
*X_S6    H_END_1 GND RES GND FOR_CL_S6
X_S6    HICCUP_N GND RES GND FOR_CL_S6

X_U649         N16313522 N16311314 d_d1_cl
X_U650         N16311320 N16313522 d_d1_cl
V_V8         N16311762 GND 51.2m
X_U614      N16311658 N16311636 N16311730 AND2_BASIC_GEN
+ PARAMS: VDD=1 VSS=0
+  VTHRESH=500E-3
X_U648         RESET N16311730 N16311482 OR2_BASIC_GEN
.ENDS
*$
.MODEL _D2_mod D N=1.09
*$
.MODEL _D3_mod D IS=1e-21 N=2.7
*$
.MODEL _D5_mod D IS=1.0e-16 VJ=.31
*$
.MODEL D_D1_0_CLK D RS=0.1n N=0.1m
*$
.MODEL _D_IDEAL D N=0.01 RS=1m IS=1f
*.MODEL _D_IDEAL D IS=1.0e-15 TT=10p RS=1m
*$
.MODEL _D4_mod D RS=10
*$
.SUBCKT PSMN5R5-60YS G D S PARAMS: RDSON=8.3m Ciss=3.5n Crss=240p Coss=457p VSP=3 RG=0.7
C_C1         S Da  {Coss} IC=0
R_R1         Da D  10
C_C2         Ga D  {Crss} IC=0
R_R2         G Ga {RG}
C_C3         Ga S  {Ciss} IC=0
D_D1         S Db Dbreak
R_R3         Db D 1m
S_switchM         D S Ga S _switchM
RS_switchM         Ga S 100Meg
.MODEL         _switchM VSWITCH Roff=100e6 Ron={RDSON} Voff=1.1 Von={VSP}
.model Dbreak D Is=1e-14 Cjo=.1pF Rs=.1
.ends PSMN5R5-60YS
*$
.MODEL DIODE_SCHOTTKY D ( IS=34.9u RS=0.210 BV=60.0 IBV=2.00u M=0.333 N=2.28 TT=7.20n )
*$
.SUBCKT LDCR IN OUT
+ PARAMs:  L=1u DCR=0.01 IC=0
L	IN 1  {L} IC={IC}
RDCR	1 OUT {DCR}
.ENDS LDCR
*$
*.MODEL DIODE_SCHOTTKY D ( IS=34.9u RS=0.210 BV=30.0 IBV=2.00u M=0.333 N=2.28 TT=7.20n )
*$
.SUBCKT CESR 1 2 PARAMS: C=10u
Ccap 1 3 {C}  ;IC={IC}
Resr 3 2 0.015
.ENDS
*$
.SUBCKT Cout 2 4 PARAMS: IC=0
R1 2 3 6.666666666666666E-4
C1 3 4 2.998754325259516E-4 IC={IC}
R3 5 4 5
R2 2 4 3334717.9913228094
R4 3 26 148148.14814814818
R6 3 7 148.14814814814815
C5 7 1 8.996262975778547E-6 IC={IC}
R7 3 10 14.814814814814817
C6 10 1 8.996262975778547E-6 IC={IC}
R8 3 13 1.4814814814814816
C7 13 1 8.996262975778547E-6 IC={IC}
C2 26 1 8.996262975778547E-6 IC={IC}
R9 3 28 14814.814814814816
C3 28 1 8.996262975778547E-6 IC={IC}
R10 3 29 1481.4814814814815
C4 29 1 8.996262975778547E-6 IC={IC}
L8 1 5 15p
R24 1 5 0.0020
L12 5 4 1n
.ENDS
*$
.SUBCKT POWER_N_MOSFET drain gate source
Cgd g d 7.000000000000002E-11
M1 d g s s _M1_modX L=1u W=1u
.MODEL _M1_modX NMOS CGDO=0 CGSO=0 KP=100 RD=0 RS=0 TOX=1E-7 UO=600 VTO= 1.1
Rds2 source s 0.0115
Rds1 drain d 0.0115
RG gate g 1.3
Cgs g s 3.1E-10
Dbd source drain Dbt
.MODEL Dbt D(BV= 27.500000000000004 M=.35 VJ= .9 CJO= 4.900000000000001E-10)
.ENDS POWER_N_MOSFET
*$
.SUBCKT Si7850DPM1 D G S
V1 D 4
V2 G 1
V3 S 2
M1 3 1 2 2 NMOS W=1611091u L=0.40u
M2 2 1 2 4 PMOS W=1611091u L=0.62u
R1 4 3 66E-4 TC=11.5E-3,5.5E-6
CGS 1 2 520E-12
DBD 2 4 DBD
.MODEL NMOS NMOS (LEVEL = 3 TOX = 7E-8
+ RS = 88E-4 RD = 0 NSUB = 1.44E17
+ KP = 2.1E-5 UO = 650
+ VMAX = 0 XJ = 5E-7 KAPPA = 7E-1
+ ETA = 1E-4 TPG = 1
+ IS = 0 LD = 0
+ CGSO = 0 CGDO = 0 CGBO = 0
+ NFS = 0.8E12 DELTA = 0.1)
.MODEL PMOS PMOS (LEVEL = 3 TOX = 7E-8
+NSUB = 2E16 TPG = -1)
.MODEL DBD D (CJO=500E-12 VJ=0.38 M=0.4
+RS=0.1 FC=0.5 IS=1E-12 TT=4.8E-8 N=1 BV=60.5)
.ENDS
*$
.SUBCKT D8_EXT A C
D5 A C _D8E_mod
.MODEL _D8E_mod D AF=1 CJO=2.667776e-11 EG=1.11
+FC=0.5 IBV=10e-6 IS 2.843488e-9 KF=0 M=388.7e-3 N=1.091
+RS=4.21e-1 TNOM=25 TT=0 VJ=632.1e-3 XTI=3 IBVL=0
+ISR=0 NBV=1 NBVL=1 NR=2 TBV1=0 TBV2=0 TRS1=0 TRS2=0
*+CV=100 IKF=inf
.ENDS
*$
.SUBCKT COMP_BASIC_GEN INP INM Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
B_ABM Yint 0 V=IF (V(INP) > V(INM), {VDD},{VSS})
R1 Yint Y 1
C1 Y 0 1n
.ENDS COMP_BASIC_GEN
*$
.SUBCKT COMPHYS_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5
EIN INP1 INM1 INP INM 1
BHYS INP1 INP2 V=IF( V(1) > {VTHRESH},-V(HYS),0)
BOUT OUT 0 V=IF( V(INP2)>V(INM1), {VDD} ,{VSS})
R1 OUT 1 1
C1 1 0 5n
RINP1 INP1 0 1K
.ENDS COMPHYS_BASIC_GEN
*$
.SUBCKT COMPHYS2_BASIC_GEN INP INM HYS OUT PARAMS: VDD=1 VSS=0 VTHRESH=0.5
+ T=10
EIN INP1 INM1 INP INM 1
BHYS INM2 INM1 V=IF( V(1) > {VTHRESH},-V(HYS)/2,V(HYS)/2)
BOUT OUT 0 V=IF( V(INP1)>V(INM2), {VDD} ,{VSS})
R1 OUT 1 1
C1 1 0 {T*1e-9}
RINP1 INP1 0 10K
RINM2 INM2 0 10K
.ENDS COMPHYS2_BASIC_GEN
*$
.SUBCKT AND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B 0 0 0 0 Y 0 AND tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS AND2_BASIC_GEN
*$
.SUBCKT AND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C 0 0 0 Y 0 AND tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS AND3_BASIC_GEN
*$
.SUBCKT AND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C D 0 0 Y 0 AND tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS AND4_BASIC_GEN
*$
.SUBCKT NAND2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B 0 0 0 Y 0 0 AND tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NAND2_BASIC_GEN
*$
.SUBCKT NAND3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C 0 0 Y 0 0 AND tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NAND3_BASIC_GEN
*$
.SUBCKT NAND4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C D 0 Y 0 0 AND tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NAND4_BASIC_GEN
*$
.SUBCKT OR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B 0 0 0 0 Y 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS OR2_BASIC_GEN
*$
.SUBCKT OR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C 0 0 0 Y 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS OR3_BASIC_GEN
*$
.SUBCKT OR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C D 0 0 Y 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS OR4_BASIC_GEN
*$
.SUBCKT NOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B 0 0 0 Y 0 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NOR2_BASIC_GEN
*$
.SUBCKT NOR3_BASIC_GEN A B C Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C 0 0 Y 0 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NOR3_BASIC_GEN
*$
.SUBCKT NOR4_BASIC_GEN A B C D Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C D 0 Y 0 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NOR4_BASIC_GEN
*$
.SUBCKT NOR5_BASIC_GEN A B C D E Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C D E Y 0 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NOR5_BASIC_GEN
*$
.SUBCKT NOR6_BASIC_GEN A B C D E F Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B C 0 0 0 Y1 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
A2 D E F 0 0 0 Y2 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
A3 Y1 Y2 0 0 0 Y 0 0 OR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS NOR6_BASIC_GEN
*$
.SUBCKT D_D1_CL 1 2
D1 1 2 DD1
.MODEL DD1 D( IS=1e-15 TT=10p Rs=0.05 N=.1 )
.ENDS D_D1_CL
*$
.subckt FOR_CL_S5 1 2 3 4
S_S5         3 4 1 2 _S5
RS_S5         1 2 1G
.MODEL         _S5 VSWITCH Roff=1e6 Ron=1.0 Voff=0.25 Von=0.75
.ends FOR_CL_S5
*$
.subckt FOR_CL_S6 1 2 3 4
S_S6         3 4 1 2 _S6
RS_S6         1 2 1G
.MODEL         _S6 VSWITCH Roff=1e9 Ron=1m Voff=0.25 Von=0.75
.ends FOR_CL_S6
*$
.SUBCKT INV_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A4 A 0 0 0 0 Y 0 0 BUF tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS INV_BASIC_GEN
*$
.model D_D1 d is=1e-015 tt=1e-011 RS=0.05 n=0.1
*$
.SUBCKT XOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B 0 0 0 0 Y 0 XOR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS XOR2_BASIC_GEN
*$
.SUBCKT XNOR2_BASIC_GEN A B Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
A1 A B 0 0 0 NY 0 0 XOR tau=10n td=1n tripdt=2n ref={VTHRESH}
.ENDS XNOR2_BASIC_GEN
*$
.SUBCKT MUX2_BASIC_GEN A B S Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
B_ABMGATE YINT 0 V=IF(V(S) > {VTHRESH}, V(B),V(A))
RINT YINT Y 1
CINT Y 0 1n
.ENDS MUX2_BASIC_GEN
*$
.SUBCKT INV_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n
B_ABMGATE1 YINT1 0 V=IF(V(A) > {VTHRESH} ,{VDD},{VSS})
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.443}
B_ABMGATE2 YINT3 0 V=IF(V(YINT2) > {VTHRESH}, {VSS},{VDD})
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS INV_DELAY_BASIC_GEN
*$
.SUBCKT BUF_DELAY_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 10n
B_ABMGATE1 YINT1 0 V=IF(V(A) > {VTHRESH}, {VDD},{VSS})
RINT YINT1 YINT2 1
CINT YINT2 0 {DELAY*1.443}
B_ABMGATE2 YINT3 0 V=IF(V(YINT2) > {VTHRESH}, {VDD},{VSS})
RINT2 YINT3 Y 1
CINT2 Y 0 1n
.ENDS BUF_DELAY_BASIC_GEN
*$
.SUBCKT BUF_BASIC_GEN A  Y PARAMS: VDD=1 VSS=0 VTHRESH=0.5
B_ABMGATE YINT 0 V=IF(V(A) > {VTHRESH}, {VDD}, {VSS})
RINT YINT Y 1
CINT Y 0 1n
.ENDS BUF_BASIC_GEN
*$
.SUBCKT SRLATCHSHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
BQ 0 Qint I= IF(V(S) > {VTHRESH},5,IF(V(R)>{VTHRESH},-5, 0))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF(V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr QB 1
Cdummy1 Q 0 1n
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHSHP_BASIC_GEN
*$
.SUBCKT SRLATCHRHP_BASIC_GEN S R Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
BQ 0 Qint I=IF(V(R) > {VTHRESH},-5,IF(V(S)>{VTHRESH},5, 0))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF(V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr QB 1
Cdummy1 Q 0 1n
Cdummy2 QB 0 1n
.IC V(Qint) {VSS}
.ENDS SRLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHRHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
BQ 0 Qint I=IF(V(RB) < {VTHRESH},-5,IF(V(SB) < {VTHRESH},5, 0))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF( V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr QB 1
.IC V(Qint) {VSS}
.ENDS SBRBLATCHRHP_BASIC_GEN
*$
.SUBCKT SBRBLATCHSHP_BASIC_GEN SB RB Q QB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
BQ 0 Qint I=IF(V(SB) < {VTHRESH},5,IF(V(RB) < {VTHRESH},-5, 0))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF( V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr QB 1
.IC V(Qint) {VSS}
.ENDS SBRBLATCHSHP_BASIC_GEN
*$
.SUBCKT DFFSBRB_SHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
BQ 0 Qint I=IF(V(SB) < {VTHRESH},5,IF(V(RB)<{VTHRESH},-5, IF(V(CLKint)> {VTHRESH}, IF(V(D)> {VTHRESH},5,-5),0)))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF( V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.ENDS DFFSBRB_SHPBASIC_GEN
*$
.SUBCKT DFFSR_SHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
BQ 0 Qint I=IF(V(S) > {VTHRESH},5,IF(V(R) > {VTHRESH},-5, IF(V(CLKint)> {VTHRESH},
+ IF(V(D)> {VTHRESH},5,-5),0)))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD=1 VSS=0 VTHRESH=0.5 DELAY = 20n
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF( V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.ENDS DFFSR_SHPBASIC_GEN
*$
.SUBCKT DFFSBRB_RHPBASIC_GEN Q QB CLK D RB SB PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
BQ 0 Qint I=IF(V(RB) < {VTHRESH},-5,IF(V(SB)< {VTHRESH},5, IF(V(CLKint)> {VTHRESH},
+ IF(V(D)> {VTHRESH},5,-5),0)))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 5
D_D11 0 Qint D_D1
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF( V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.ENDS DFFSBRB_RHPBASIC_GEN
*$
.SUBCKT DFFSR_RHPBASIC_GEN Q QB CLK D R S PARAMS: VDD=1 VSS=0 VTHRESH=0.5
X1 CLK CLKdel INV_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 15n
X2 CLK CLKdel CLKint AND2_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH}
BQ 0 Qint I=IF(V(R) > {VTHRESH},-5,IF(V(S) > {VTHRESH},5, IF(V(CLKint)> {VTHRESH},
+ IF(V(D)> {VTHRESH},5,-5),0)))
CQint Qint 0 1n
RQint Qint 0 1000MEG
D_D10 Qint MY5 D_D1
V1 MY5 0 {VDD}
D_D11 MYVSS Qint D_D1
V2 MYVSS 0 {VSS}
EQ Qqq 0 Qint 0 1
X3 Qqq Qqqd1 BUF_DELAY_BASIC_GEN PARAMS: VDD={VDD} VSS={VSS} VTHRESH={VTHRESH} DELAY = 20n
RQq Qqqd1 Q 1
BQb Qbr 0 V=IF( V(Q) > {VTHRESH}, {VSS},{VDD})
RQb Qbr Qb 1
Cdummy1 Q 0 1nF
Cdummy2 QB 0 1nF
.IC V(Qint) {VSS}
.ENDS DFFSR_RHPBASIC_GEN
*$
